fishlife("Sebastes mystinus")
fishlife(Sebastes mystinus)
devtools::install_github("james-thorson/FishLife")
fishlife(Sebastes mystinus)
devtools::install_github("james-thorson/FishLife")
library(FishLife)
fishlife(Sebastes mystinus)
fishlife("Sebastes mystinus")
BRF_ex<-Plot_taxa(Search_species(Genus="Scorpaenichthys",Species="marmoratus")$match_taxonomy, mfrow=c(2,2) )
library(fishbase)
library(rfishbase)
fishlife("Sebastes mystinus")
Plot_taxa( Search_species(Genus="Lutjanus",Species="campechanus")$match_taxonomy )
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
remotes::install_github("nwfsc-assess/nwfscDiag")
remotes::install_github("chantelwetzel-noaa/HandyCode")
remotes::install_github("chantelwetzel-noaa/HandyCode")
remotes::install_github("nwfsc-assess/nwfscDiag")
shiny::runApp('Github/SS-DL-tool')
fishlife("Sebastes mystinus")
packageVersion("rfishbase")
remotes::install_github( 'ropensci/rfishbase@fb-21.06', force=TRUE )
fishlife("Sebastes mystinus")
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
?pivot_longer
library(tidyr)
detach("package:tidyr", unload = TRUE)
remove.packages("cli")
install.packages("cli")
shiny::runApp('Github/SS-DL-tool')
install.packages(c("dbplyr", "duckdb", "fmesher", "htmlTable", "knitr", "posterior", "RSQLite", "withr"))
remotes::install_github("r4ss/r4ss")
remotes::install_github("chantelwetzel-noaa/HandyCode")
remotes::install_github("nwfsc-assess/nwfscDiag")
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
4960/32
?profile
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
7*8
56+24+32+32
235.95+1.5+1.6+5)*4
(235.95+1.5+1.6+5)*4
((235.95+1.5+1.6+5)*4)/4
shiny::runApp('Github/SS-DL-tool')
184*4
quad.plot.WC<-data.frame(read.csv("C:/Users/Jason.Cope/Documents/Github/Fisheries-Shiny-App/Fisheries_Updated_File.csv"))
library(calibrate)
library(gplots)
library(fields)
library(ggrepel)
library(ggplot2)
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb1))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))
runApp('Github/Fisheries-Shiny-App')
quad.plot.WC<-data.frame(read.csv("C:/Users/Jason.Cope/Desktop/quadplot/2023/WC_quadplot_2023.csv"))
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb1))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,4.1)+
geom_text_repel(show.legend = FALSE,aes(label = Abb1))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb1))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb2))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb2))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb2))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))+
#geom_text(aes(1,1.5,color="black",label="TRP",angle=90,vjust=1.1,size=1.1))
geom_text(aes(0.625,1.35,color="black",label="LRP: Rockfishes",angle=90,vjust=1,size=1.1))+
geom_text(aes(0.5,1.4,color="black",label="LRP: Flatfishes",angle=90,vjust=-0.1,size=1.1))
p
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb2))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))+
#geom_text(aes(1,1.5,color="black",label="TRP",angle=90,vjust=1.1,size=1.1))
geom_text(aes(0.625,1.35,label="LRP: Rockfishes",angle=90,vjust=1,size=1.1))+
geom_text(aes(0.5,1.4,label="LRP: Flatfishes",angle=90,vjust=-0.1,size=1.1))
runApp('Github/Fisheries-Shiny-App')
?geom_text
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,4.1)+
geom_text_repel(show.legend = FALSE,aes(label = Abb2))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))+
#geom_text(aes(1,1.5,color="black",label="TRP",angle=90,vjust=1.1,size=1.1))
geom_text(aes(0.625,1.35,label="LRP: Rockfishes",angle=90,vjust=1,size=1.1))+
geom_text(aes(0.5,1.4,label="LRP: Flatfishes",angle=90,vjust=-0.1,size=1.1))
ggplot(quad.plot.WC,aes(B.Bmsy,F.Fmsy, label=Abb1,color=Spp_type,shape=Spp_type))+
geom_point()+
xlim(0,4)+
ylim(0,1.5)+
geom_text_repel(show.legend = FALSE,aes(label = Abb2))+
#theme_minimal()+
theme_light()+
theme(legend.title=element_blank())+
labs(x=expression(bold("Relative Stock Status")),y=expression(bold("Fishing Intensity")))+
geom_vline(xintercept = c(0.5,0.62,1),lty=c(1,1,2),col=c("red","red","black"),lwd=c(1.25,1.25,1))+
geom_hline(yintercept = 1,lty=2)+
guides(shape = guide_legend(override.aes = list(size = 4)))+
#geom_text(aes(1,1.5,color="black",label="TRP",angle=90,vjust=1.1,size=1.1))
geom_text(aes(0.625,1.35,label="LRP: Rockfishes",angle=90,vjust=1,size=1.1))+
geom_text(aes(0.5,1.4,label="LRP: Flatfishes",angle=90,vjust=-0.1,size=1.1))
runApp('Github/Fisheries-Shiny-App')
shiny::runApp('Github/SS-DL-tool')
shiny::runApp('Github/SS-DL-tool')
library(ggplot2)
library(ggbreak)
install.packages("ggbreak")
library(ggbreak)
gf=quad.plot.WC<-data.frame(read.csv("C:/Users/Jason.Cope/Desktop/quadplot/2023/WC_quadplot_2023.csv"))
#gf = data.frame(read.csv( "WC_quadplot_2023_FY2024.csv" , header = TRUE))
# update the plotted data file
update_plotted(gf_file)
spp = levels(factor(gf$Abb2))
for( i in 1:length(spp)){
df = gf[gf$Abb2 == spp[i],]
df = df[df$Assessment_Year == max(df$Assessment_Year), ]
if(i == 1){DF = df}else{DF = data.frame(rbind(DF,df))}
}
DF$Abb1 = stringr::str_replace_all(DF$Abb1, "_", " ")
DF$Abb1 = stringr::str_replace_all(DF$Abb1, "_", " ")
DF$Abb2 = stringr::str_replace_all(DF$Abb2, "_", " ")
# plot names for just quillbacks
df_short = DF[DF$Abb2 %in% c('Quillback CA','Quillback OR'),]
# DF = DF[DF$F.Fmsy < 2.0,]
df_short$x = df_short$B.Bmsy + 0.8
color_scheme = RColorBrewer::brewer.pal(n = 12, name = "Paired")[c(2,4,6)]
groundfish_status_full <- ggplot(DF, aes(x = B.Bmsy, y = F.Fmsy,
label = Abb2, colour = factor(Spp_type), fill = factor(Spp_type))) +
geom_point( size=1 , shape= 21 )+
geom_text(data=df_short, aes(x = x, y = F.Fmsy, label = Abb2), size = 3)+
scale_fill_manual(values = color_scheme)+
scale_color_manual(values= color_scheme)+
xlab("") +
ylab("") +
geom_segment(aes(x = 1, y = 0, xend=1, yend=4), colour='black', size = 1, linetype=3) +
geom_segment(aes(x = 0, y = 1, xend=4, yend=1), colour='black', size = 1, linetype=3) +
geom_segment(aes(x = 0.500, y = 0, xend=0.500, yend=4), colour=color_scheme[1], size = 1, linetype=1) +
geom_segment(aes(x = 0.625, y = 0, xend=0.625, yend=4), colour=color_scheme[3], size = 1, linetype=1) +
# geom_text(x=0.4, y=2, label="Flatfishes", color = color_scheme[1], angle = 90) +
# geom_text(x=0.7, y=2, label="Scorpaenids and Other", color = color_scheme[3], angle = 90) +
theme_classic() +
theme(legend.title = element_blank(), legend.position = "none",#c(0.9, 0.9),
axis.line =  element_line(colour = "grey", size = 1, linetype = "solid"),
axis.ticks = element_line(colour = "grey"),
axis.text =  element_text(colour = "grey") )
groundfish_status_full
setwd("C:/Users/Jason.Cope/Documents/Github/Sebastes_melanops_OR/Document")
library(r4ss)
library(sa4ss)
if(file.exists("_main.Rmd")){
file.remove("_main.Rmd")
}
# Render the pdf
bookdown::render_book("00a.Rmd", clean=FALSE, output_dir = getwd())
library(ggplot2)
library(ggbreak)
gf=quad.plot.WC<-data.frame(read.csv("C:/Users/Jason.Cope/Desktop/quadplot/2023/WC_quadplot_2023.csv"))
spp = levels(factor(gf$Abb2))
for( i in 1:length(spp)){
df = gf[gf$Abb2 == spp[i],]
df = df[df$Assessment_Year == max(df$Assessment_Year), ]
if(i == 1){DF = df}else{DF = data.frame(rbind(DF,df))}
}
DF$Abb1 = stringr::str_replace_all(DF$Abb1, "_", " ")
DF$Abb2 = stringr::str_replace_all(DF$Abb2, "_", " ")
# plot names for just quillbacks
df_short = DF[DF$Abb2 %in% c('Quillback CA','Quillback OR'),]
# DF = DF[DF$F.Fmsy < 2.0,]
df_short$x = df_short$B.Bmsy + 0.8
color_scheme = RColorBrewer::brewer.pal(n = 12, name = "Paired")[c(2,4,6)]
groundfish_status_full <- ggplot(DF, aes(x = B.Bmsy, y = F.Fmsy,
label = Abb2, colour = factor(Spp_type), fill = factor(Spp_type))) +
geom_point( size=1 , shape= 21 )+
geom_text(data=df_short, aes(x = x, y = F.Fmsy, label = Abb2), size = 3)+
scale_fill_manual(values = color_scheme)+
scale_color_manual(values= color_scheme)+
xlab("") +
ylab("") +
geom_segment(aes(x = 1, y = 0, xend=1, yend=4), colour='black', size = 1, linetype=3) +
geom_segment(aes(x = 0, y = 1, xend=4, yend=1), colour='black', size = 1, linetype=3) +
geom_segment(aes(x = 0.500, y = 0, xend=0.500, yend=4), colour=color_scheme[1], size = 1, linetype=1) +
geom_segment(aes(x = 0.625, y = 0, xend=0.625, yend=4), colour=color_scheme[3], size = 1, linetype=1) +
# geom_text(x=0.4, y=2, label="Flatfishes", color = color_scheme[1], angle = 90) +
# geom_text(x=0.7, y=2, label="Scorpaenids and Other", color = color_scheme[3], angle = 90) +
theme_classic() +
theme(legend.title = element_blank(), legend.position = "none",#c(0.9, 0.9),
axis.line =  element_line(colour = "grey", size = 1, linetype = "solid"),
axis.ticks = element_line(colour = "grey"),
axis.text =  element_text(colour = "grey") )
groundfish_status_full
DF <- DF[DF$Abb2 != "Quillback CA",]
DF <- DF[DF$Abb2 != "Quillback OR",]
DF = DF[DF$F.Fmsy < 2.0,]
groundfish_status <- ggplot(DF, aes(x = B.Bmsy, y = F.Fmsy,
label = Abb2, colour = factor(Spp_type), fill = factor(Spp_type))) +
geom_point( size=2 , shape= 21 )+
scale_fill_manual(values = color_scheme)+
scale_color_manual(values= color_scheme)+
xlab(paste0("Relative stock status: Target reference point")) +
ylab(paste0("Fishing intensity F/Fspr")) +
geom_segment(aes(x = 1, y = 0, xend=1, yend=2), colour='black', size = 1.3, linetype=3) +
geom_segment(aes(x = 0, y = 1, xend=4, yend=1), colour='black', size = 1.3, linetype=3) +
geom_segment(aes(x = 0.500, y = 0, xend=0.500, yend=2), colour=color_scheme[1], size = 1.3, linetype=1) +
geom_segment(aes(x = 0.625, y = 0, xend=0.625, yend=2), colour=color_scheme[3], size = 1.3, linetype=1) +
geom_text(x=0.4, y=1.65, label="LRP: Flatfishes", color = color_scheme[1], angle = 90) +
geom_text(x=0.7, y=1.65, label="LRP: Scorpaenids and Other", color = color_scheme[3], angle = 90)
groundfish_status +
# scale_y_break(c(3, 4))+
theme_classic() +
theme(legend.title = element_blank(), legend.position = c(0.92, 0.9),
axis.line =  element_line(colour = "grey", size = 1, linetype = "solid"),
axis.ticks = element_line(colour = "grey"),
axis.text =  element_text(colour = "grey") )+
geom_text_repel(family = "sans", box.padding = 0.2, max.overlaps = 20, size = 2.5, color="black") +
# add in small plot
annotation_custom(ggplotGrob(groundfish_status_full),
xmin = 2, xmax = 4,
ymin = 1.1, ymax = 2.1)
df_short = gf[gf$Abb2 %in% c('Quillback_CA','Quillback_OR'),]
df_short <- df_short %>% mutate(
Btext = format(round(df_short$B.Bmsy,1),nsmall=1),
Ftext = format(round(df_short$F.Fmsy,1),nsmall=1),
text = paste0(Abb2,": B/Bmsy = ",Btext,"; F/Fmsy = " ,Ftext),
text = stringr::str_replace_all(text, "_", " ")
)
ymax = 1.5
groundfish_status <- ggplot(DF, aes(x = B.Bmsy, y = F.Fmsy,
label = Abb2, colour = factor(Spp_type), fill = factor(Spp_type))) +
geom_point( size=2 , shape= 21 )+
scale_fill_manual(values = color_scheme)+
scale_color_manual(values= color_scheme)+
xlab(paste0("Relative stock status: Target reference point")) +
ylab(paste0("Fishing intensity F/Fspr")) +
geom_segment(aes(x = 1, y = 0, xend=1, yend=ymax), colour='black', size = 1.3, linetype=3) +
geom_segment(aes(x = 0, y = 1, xend=4, yend=1), colour='black', size = 1.3, linetype=3) +
geom_segment(aes(x = 0.500, y = 0, xend=0.500, yend=ymax), colour=color_scheme[1], size = 1.3, linetype=1) +
geom_segment(aes(x = 0.625, y = 0, xend=0.625, yend=ymax), colour=color_scheme[3], size = 1.3, linetype=1) +
geom_text(x=0.4, y=1.0, label="LRP: Flatfishes", color = color_scheme[1], angle = 90) +
geom_text(x=0.7, y=1.0, label="LRP: Scorpaenids and Other", color = color_scheme[3], angle = 90)
groundfish_status +
# scale_y_break(c(3, 4))+
theme_classic() +
theme(legend.title = element_blank(), legend.position = c(0.92, 0.9),
axis.line =  element_line(colour = "grey", size = 1, linetype = "solid"),
axis.ticks = element_line(colour = "grey"),
axis.text =  element_text(colour = "grey") )+
geom_text_repel(family = "sans", box.padding = 0.2, max.overlaps = 20, size = 2.5, color="black") +
annotate("segment", x = 1.5, xend = 1.25, y = 1.35, yend = 1.5,
colour = "black", size=1, arrow=arrow(length=unit(0.20,"cm"), type='closed')) +
geom_text(data = df_short, aes(x=1.5, y=c(1.25,1.3), label=text),
size = 3, hjust = 0, nudge_x = 0.05)
groundfish_status
DF <- DF[DF$Abb2 != "Quillback CA",]
DF <- DF[DF$Abb2 != "Quillback OR",]
DF = DF[DF$F.Fmsy < 2.0,]
groundfish_status <- ggplot(DF, aes(x = B.Bmsy, y = F.Fmsy,
label = Abb2, colour = factor(Spp_type), fill = factor(Spp_type))) +
geom_point( size=2 , shape= 21 )+
scale_fill_manual(values = color_scheme)+
scale_color_manual(values= color_scheme)+
xlab(paste0("Relative stock status: Target reference point")) +
ylab(paste0("Fishing intensity F/Fspr")) +
geom_segment(aes(x = 1, y = 0, xend=1, yend=2), colour='black', size = 1.3, linetype=3) +
geom_segment(aes(x = 0, y = 1, xend=4, yend=1), colour='black', size = 1.3, linetype=3) +
geom_segment(aes(x = 0.500, y = 0, xend=0.500, yend=2), colour=color_scheme[1], size = 1.3, linetype=1) +
geom_segment(aes(x = 0.625, y = 0, xend=0.625, yend=2), colour=color_scheme[3], size = 1.3, linetype=1) +
geom_text(x=0.4, y=1.65, label="LRP: Flatfishes", color = color_scheme[1], angle = 90) +
geom_text(x=0.7, y=1.65, label="LRP: Scorpaenids and Other", color = color_scheme[3], angle = 90)
groundfish_status +
# scale_y_break(c(3, 4))+
theme_classic() +
theme(legend.title = element_blank(), legend.position = c(0.92, 0.9),
axis.line =  element_line(colour = "grey", size = 1, linetype = "solid"),
axis.ticks = element_line(colour = "grey"),
axis.text =  element_text(colour = "grey") )+
geom_text_repel(family = "sans", box.padding = 0.2, max.overlaps = 20, size = 2.5, color="black") +
# add in small plot
annotation_custom(ggplotGrob(groundfish_status_full),
xmin = 2, xmax = 4,
ymin = 1.1, ymax = 2.1)
DF <- DF[DF$Abb2 != "Quillback CA",]
DF <- DF[DF$Abb2 != "Quillback OR",]
DF = DF[DF$F.Fmsy < 2.0,]
groundfish_status <- ggplot(DF, aes(x = B.Bmsy, y = F.Fmsy,
label = Abb2, colour = factor(Spp_type), fill = factor(Spp_type))) +
geom_point( size=2 , shape= 21 )+
scale_fill_manual(values = color_scheme)+
scale_color_manual(values= color_scheme)+
xlab(paste0("Relative stock status: Target reference point")) +
ylab(paste0("Fishing intensity F/Fspr")) +
geom_segment(aes(x = 1, y = 0, xend=1, yend=2), colour='black', size = 1.3, linetype=3) +
geom_segment(aes(x = 0, y = 1, xend=4, yend=1), colour='black', size = 1.3, linetype=3) +
geom_segment(aes(x = 0.500, y = 0, xend=0.500, yend=2), colour=color_scheme[1], size = 1.3, linetype=1) +
geom_segment(aes(x = 0.625, y = 0, xend=0.625, yend=2), colour=color_scheme[3], size = 1.3, linetype=1) +
geom_text(x=0.4, y=1.65, label="LRP: Flatfishes", color = color_scheme[1], angle = 90) +
geom_text(x=0.7, y=1.65, label="LRP: Scorpaenids and Other", color = color_scheme[3], angle = 90)
groundfish_status +
# scale_y_break(c(3, 4))+
theme_classic() +
theme(legend.title = element_blank(), legend.position = c(0.92, 0.9),
axis.line =  element_line(colour = "grey", size = 1, linetype = "solid"),
axis.ticks = element_line(colour = "grey"),
axis.text =  element_text(colour = "grey") )+
geom_text_repel(family = "sans", box.padding = 0.2, max.overlaps = 20, size = 2.5, color="black") +
# add in small plot
annotation_custom(ggplotGrob(groundfish_status_full),
xmin = 2, xmax = 4,
ymin = 1.1, ymax = 2.1)
groundfish_status
library(ggrepel)
groundfish_status +
# scale_y_break(c(3, 4))+
theme_classic() +
theme(legend.title = element_blank(), legend.position = c(0.92, 0.9),
axis.line =  element_line(colour = "grey", size = 1, linetype = "solid"),
axis.ticks = element_line(colour = "grey"),
axis.text =  element_text(colour = "grey") )+
geom_text_repel(family = "sans", box.padding = 0.2, max.overlaps = 20, size = 2.5, color="black") +
# add in small plot
annotation_custom(ggplotGrob(groundfish_status_full),
xmin = 2, xmax = 4,
ymin = 1.1, ymax = 2.1)
df_short = gf[gf$Abb2 %in% c('Quillback_CA','Quillback_OR'),]
df_short <- df_short %>% mutate(
Btext = format(round(df_short$B.Bmsy,1),nsmall=1),
Ftext = format(round(df_short$F.Fmsy,1),nsmall=1),
text = paste0(Abb2,": B/Bmsy = ",Btext,"; F/Fmsy = " ,Ftext),
text = stringr::str_replace_all(text, "_", " ")
)
ymax = 1.5
groundfish_status <- ggplot(DF, aes(x = B.Bmsy, y = F.Fmsy,
label = Abb2, colour = factor(Spp_type), fill = factor(Spp_type))) +
geom_point( size=2 , shape= 21 )+
scale_fill_manual(values = color_scheme)+
scale_color_manual(values= color_scheme)+
xlab(paste0("Relative stock status: Target reference point")) +
ylab(paste0("Fishing intensity F/Fspr")) +
geom_segment(aes(x = 1, y = 0, xend=1, yend=ymax), colour='black', size = 1.3, linetype=3) +
geom_segment(aes(x = 0, y = 1, xend=4, yend=1), colour='black', size = 1.3, linetype=3) +
geom_segment(aes(x = 0.500, y = 0, xend=0.500, yend=ymax), colour=color_scheme[1], size = 1.3, linetype=1) +
geom_segment(aes(x = 0.625, y = 0, xend=0.625, yend=ymax), colour=color_scheme[3], size = 1.3, linetype=1) +
geom_text(x=0.4, y=1.0, label="LRP: Flatfishes", color = color_scheme[1], angle = 90) +
geom_text(x=0.7, y=1.0, label="LRP: Scorpaenids and Other", color = color_scheme[3], angle = 90)
groundfish_status +
# scale_y_break(c(3, 4))+
theme_classic() +
theme(legend.title = element_blank(), legend.position = c(0.92, 0.9),
axis.line =  element_line(colour = "grey", size = 1, linetype = "solid"),
axis.ticks = element_line(colour = "grey"),
axis.text =  element_text(colour = "grey") )+
geom_text_repel(family = "sans", box.padding = 0.2, max.overlaps = 20, size = 2.5, color="black") +
annotate("segment", x = 1.5, xend = 1.25, y = 1.35, yend = 1.5,
colour = "black", size=1, arrow=arrow(length=unit(0.20,"cm"), type='closed')) +
geom_text(data = df_short, aes(x=1.5, y=c(1.25,1.3), label=text),
size = 3, hjust = 0, nudge_x = 0.05)
DF <- DF[DF$Abb2 != "Quillback CA",]
DF <- DF[DF$Abb2 != "Quillback OR",]
DF = DF[DF$F.Fmsy < 2.0,]
groundfish_status <- ggplot(DF, aes(x = B.Bmsy, y = F.Fmsy,
label = Abb2, colour = factor(Spp_type), fill = factor(Spp_type))) +
geom_point( size=2 , shape= 21 )+
scale_fill_manual(values = color_scheme)+
scale_color_manual(values= color_scheme)+
xlab(paste0("Relative stock status: Target reference point")) +
ylab(paste0("Fishing intensity F/Fspr")) +
geom_segment(aes(x = 1, y = 0, xend=1, yend=2), colour='black', size = 1.3, linetype=3) +
geom_segment(aes(x = 0, y = 1, xend=4, yend=1), colour='black', size = 1.3, linetype=3) +
geom_segment(aes(x = 0.500, y = 0, xend=0.500, yend=2), colour=color_scheme[1], size = 1.3, linetype=1) +
geom_segment(aes(x = 0.625, y = 0, xend=0.625, yend=2), colour=color_scheme[3], size = 1.3, linetype=1) +
geom_text(x=0.4, y=1.65, label="LRP: Flatfishes", color = color_scheme[1], angle = 90) +
geom_text(x=0.7, y=1.65, label="LRP: Scorpaenids and Other", color = color_scheme[3], angle = 90)
groundfish_status +
# scale_y_break(c(3, 4))+
theme_classic() +
theme(legend.title = element_blank(), legend.position = c(0.92, 0.9),
axis.line =  element_line(colour = "grey", size = 1, linetype = "solid"),
axis.ticks = element_line(colour = "grey"),
axis.text =  element_text(colour = "grey") )+
geom_text_repel(family = "sans", box.padding = 0.2, max.overlaps = 20, size = 2.5, color="black") +
# add in small plot
annotation_custom(ggplotGrob(groundfish_status_full),
xmin = 2, xmax = 4,
ymin = 1.1, ymax = 2.1)
df_short = gf[gf$Abb2 %in% c('Quillback_CA','Quillback_OR'),]
df_short <- df_short %>% mutate(
Btext = format(round(df_short$B.Bmsy,1),nsmall=1),
Ftext = format(round(df_short$F.Fmsy,1),nsmall=1),
text = paste0(Abb2,": B/Bmsy = ",Btext,"; F/Fmsy = " ,Ftext),
text = stringr::str_replace_all(text, "_", " ")
)
ymax = 1.5
groundfish_status <- ggplot(DF, aes(x = B.Bmsy, y = F.Fmsy,
label = Abb2, colour = factor(Spp_type), fill = factor(Spp_type))) +
geom_point( size=2 , shape= 21 )+
scale_fill_manual(values = color_scheme)+
scale_color_manual(values= color_scheme)+
xlab(paste0("Relative stock status: Target reference point")) +
ylab(paste0("Fishing intensity F/Fspr")) +
geom_segment(aes(x = 1, y = 0, xend=1, yend=ymax), colour='black', size = 1.3, linetype=3) +
geom_segment(aes(x = 0, y = 1, xend=4, yend=1), colour='black', size = 1.3, linetype=3) +
geom_segment(aes(x = 0.500, y = 0, xend=0.500, yend=ymax), colour=color_scheme[1], size = 1.3, linetype=1) +
geom_segment(aes(x = 0.625, y = 0, xend=0.625, yend=ymax), colour=color_scheme[3], size = 1.3, linetype=1) +
geom_text(x=0.4, y=1.0, label="LRP: Flatfishes", color = color_scheme[1], angle = 90) +
geom_text(x=0.7, y=1.0, label="LRP: Scorpaenids and Other", color = color_scheme[3], angle = 90)
groundfish_status +
# scale_y_break(c(3, 4))+
theme_classic() +
theme(legend.title = element_blank(), legend.position = c(0.92, 0.9),
axis.line =  element_line(colour = "grey", size = 1, linetype = "solid"),
axis.ticks = element_line(colour = "grey"),
axis.text =  element_text(colour = "grey") )+
geom_text_repel(family = "sans", box.padding = 0.2, max.overlaps = 20, size = 2.5, color="black") +
annotate("segment", x = 1.5, xend = 1.25, y = 1.35, yend = 1.5,
colour = "black", size=1, arrow=arrow(length=unit(0.20,"cm"), type='closed')) +
geom_text(data = df_short, aes(x=1.5, y=c(1.25,1.3), label=text),
size = 3, hjust = 0, nudge_x = 0.05)
77000/150
shiny::runApp('~/Github/SS-DL-tool')
