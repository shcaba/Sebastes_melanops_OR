\clearpage
# Figures

<!-- ====================================================================== --> 
<!-- ******************************* Map ********************************** --> 
<!-- ====================================================================== --> 


```{r, results = 'asis'}
add_figure(
filein = file.path(stock_fig_loc, "black_rockfish_map.png"), 
caption = "Map of the management and assessment areas for black rockfish.",
label = 'map')
```


<!-- ====================================================================== --> 
<!-- ******************* Intro section *************************** --> 
<!-- ====================================================================== --> 

<!-- ====================================================================== --> 
<!-- ******************* Data Used in the Model *************************** --> 
<!-- ====================================================================== --> 

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "data_plot.png"), 
caption = "Summary of data sources used in the reference model",
label = 'data-plot')
```

<!-- ====================================================================== -->
<!-- *************************     Biology     **************************** --> 
<!-- ====================================================================== -->

```{r, results = 'asis'}
add_figure(
filein = file.path(bio_fig_loc, "OR_AG_Source_Sex.png"), 
caption = "Observed length-at-age by data source and sex",
label = 'len-age-data-sex')
```	

```{r, results = 'asis'}
add_figure(
filein = file.path(bio_fig_loc, "OR_AG_Sex_Year.png"), 
caption = "Observed length-at-age by sex and year. Total samples are indicated in parentheses",
label = 'len-age-sex-year')
```	

```{r, results = 'asis'}
add_figure(
filein = file.path(bio_fig_loc, "OR_VBGF_fit.png"), 
caption = "External fits to the observed length-at-age by sex",
label = 'len-age-fit')
```	

```{r, results = 'asis'}
add_figure(
filein = file.path(bio_fig_loc, "OR_CV_Sex_plot.png"), 
caption = "Coefficient of variation of length by age by sex. Numbers indicate samples by age and colors indicate sex",
label = 'cv-lt-age')
```	


```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "bio1_sizeatage.png"), 
caption = "Model estimated length-at-age. Shaded area indicates 95 percent distribution of length-at-age around the estimated growth curve",
label = 'len-age-ss')
```


\clearpage


```{r, results = 'asis'}
add_figure(
filein = file.path(bio_fig_loc, "Age1_1plots.png"), 
caption = "Ageing bias plots by reader comparisons",
label = 'age-bias_plot')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(bio_fig_loc, "OR_Reader_Bias_plot.png"), 
caption = "Estimated bias relationships for each considered matrix. Reader 1 is always considered unbiased. Reader 1a and 1b is an intra-reader comparison. B refers to the bias type and S refers to the imprecision type in the model selection for the ageing error matrix",
label = 'age-error-bias')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(bio_fig_loc, "OR_Reader_SD_plot.png"), 
caption = "Ageing error matrix standard deviation (SD) values by comparison. B refers to the bias type and S refers to the imprecision type in the model selection for the ageing error matrix",
label = 'age-error-sd')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(bio_fig_loc, "Fig1_bio_and_func_color.png"), 
caption = "Biological and functional maturity ogives. Biological maturity ogives are represented by the dashed lines (logistic regression and 95% CI is grey, flexible spline and 95% CI is light green). Functional maturity ogives are represented by the solid lines (logistic regression and 95% CI is grey, flexible spline and 95% CI is light blue)",
label = 'bio-fxn-mat-color')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(bio_fig_loc, "Fig2_func_samplesize_color.png"), 
caption = "Functional maturity ogives and sample size. Functional maturity ogives are represented by the solid lines (logistic regression and 95% CI is grey, flexible spline and 95% CI is light blue) and sample size is denoted by the size of the bubbles)",
label = 'fxn-spline-mat-color')
```


```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "bio6_maturity.png"), 
caption = "Maturity as a function of length (cm)",
label = 'maturity')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "bio9_fecundity_len.png"), 
caption = "Fecundity (kg) as a function of length (cm)",
label = 'fecundity')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(bio_fig_loc, "LW_OR_State_Source_Sex.png"), 
caption = "Sex-specific length (cm)-weight (kg) data for Oregon black rockfish samples by source. MRFSS and ORBS are the ocean boat recreational fishery from early and late periods",
label = 'len-weight-data')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(bio_fig_loc, "LW_lines_States_Sex.png"), 
caption = "Sex-specific length (cm)-weight (kg) estimated power function relationships. Washington state estimate relationships are also provided for comparison",
label = 'len-weight-or-wa')
```


\clearpage


<!-- ====================================================================== --> 
<!-- ******************* Bridge Model ************************************* --> 
<!-- ====================================================================== --> 

```{r, results = 'asis'}
add_figure(
  filein = file.path(bridge_fig_loc, "OR_SB_comp_plot.png"), 
  caption = "Comparison of spawning output for black rockfish in waters off of Oregon between Stock Synthesis versions 3.24 and 3.30. Uncertainty envelops are 95% confidence intervals",
  label = 'ssb_bridge_comps')

``` 

```{r, results = 'asis'}
add_figure(
  filein = file.path(bridge_fig_loc, "OR_Dep_comp_plot.png"), 
  caption = "Comparison of spawning output for black rockfish in waters off of Oregon between Stock Synthesis versions 3.24 and 3.30. Uncertainty envelops are 95% confidence intervals",
  label = 'deps_bridge_comps')

``` 
\clearpage


<!-- ====================================================================== -->
<!-- ***********************  Model Build  ************************************ --> 
<!-- ====================================================================== -->

```{r, echo=FALSE, results='asis'}
add_figure(
filein = file.path(mod_build_fig_loc, "Mod build stock status/compare4_Bratio_uncertainty.png"),
caption = "Relative spawning output time series by data treatment compared to the reference model. Missing scenarios mean the spawning output was too large to show",
label = 'modbuild-data-depl')
```

```{r, echo=FALSE, results='asis'}
add_figure(
filein = file.path(mod_build_fig_loc, "Mod build stock scale/compare2_spawnbio_uncertainty.png"),
caption = "Spawning output (in millions of eggs) time series by data treatment compared to the reference model",
label = 'modbuild-data-ssb')
```




<!-- ====================================================================== -->
<!-- ***********************  Model convergence and Jitters  ************************************ --> 
<!-- ====================================================================== -->

```{r, results = 'asis'}
add_figure(
filein = file.path(modconv_fig_loc, "jitterplot.png"), 
caption = "Jitter runs for the black rockfish reference model, with jitter run number on the x-axis and -log likelihood value on the y-axis. Blue dot are models that match the likelihood value of the reference model, while red dots deviate from the reference model. All red dots are above the blue dots, indicating no better fit to the reference model was found",
label = 'jitter')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(modconv_fig_loc, "pairs_plot_fast.png"), 
caption = "Pairs plots of the fastest mixing parameters from running 2000 posterior draws (and keep every draw) using the random walk Metropolis algorithm. Parameters that show little to no movement are recommended to be fixed to improve model speed and efficiency",
label = 'pairs_plot_fast')
```
\clearpage


<!-- ====================================================================== -->
<!-- ****************** Fit to the Length Data **************************** --> 
<!-- ====================================================================== -->


```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "comp_lenfit__multi-fleet_comparison.png"), 
caption = "Pearson residuals for each fishing fleet and the MPA survey. Closed bubble are positive residuals (observed > expected) and open bubbles are negative residuals (observed < expected)",
label = 'lt-pearson-resids')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "comp_lenfit_data_weighting_TA1.8_Trawl_wdis.png"), 
caption = "Mean length (cm) index from the commercial trawl fishery with 95 percent confidence intervals based on sample sizes and data weighting",
label = 'trawl-mean-len-fit')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "comp_lenfit_data_weighting_TA1.8_Non-Trawl_wdis.png"), 
caption = "Mean length (cm) index from the commercial non-trawl fishery with 95 percent confidence intervals based on sample sizes and data weighting",
label = 'nontrawl-mean-len-fit')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "comp_lenfit_data_weighting_TA1.8_Ocean.png"), 
caption = "Mean length (cm) index from the recreational ocean boat fishery with 95 percent confidence intervals based on sample sizes and data weighting",
label = 'ocean-mean-len-fit')
```
```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "comp_lenfit_data_weighting_TA1.8_Shore.png"), 
caption = "Mean length (cm) index from the recreational shore-based fishery with 95 percent confidence intervals based on sample sizes and data weighting",
label = 'shore-mean-len-fit')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "comp_lenfit_data_weighting_TA1.8_MPA.png"), 
caption = "Mean length (cm) index from the MPA survey with 95 percent confidence intervals based on sample sizes and data weighting",
label = 'mpa-mean-len-fit')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "comp_lenfit__aggregated_across_time.png"), 
caption = "Aggregated length (cm) compositions over all years",
label = 'agg-len-fit')
```

<!-- ====================================================================== -->
<!-- ****************** Fit to the Age Data ******************************* --> 
<!-- ====================================================================== -->

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "comp_condAALfit_data_weighting_TA1.8_condAgeTrawl_wdis.png"), 
caption = "Mean age from conditional age-at-length data for the commercial trawl fishery",
label = 'trawl-mean-caal')
```


```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "comp_condAALfit_data_weighting_TA1.8_condAgeNon-Trawl_wdis.png"), 
caption = "Mean age observations from the conditional age-at-length data from the non-trawl commercial fishery",
label = 'nontrawl-mean-caal')
```


```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "comp_condAALfit_data_weighting_TA1.8_condAgeOcean.png"), 
caption = "Mean age observations from the conditional age-at-length data from the ocean boat fishery",
label = 'ocean-mean-caal')
```

<!-- ====================================================================== -->
<!-- ****************** Fit to the Index*********************************** --> 
<!-- ====================================================================== -->


```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "index2_cpuefit_Non-Trawl_wdis.png"),
caption = "Fit to the non-trawl commercial survey index of abundance",
label = 'nontrawl-index-fit')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "index2_cpuefit_MRFSS.png"),
caption = "Fit to the MRFSS recreational survey index of abundance",
label = 'mrfss-index-fit')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "index2_cpuefit_Ocean.png"),
caption = "Fit to the MRFSS recreational survey index of abundance",
label = 'orbs-index-fit')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "index2_cpuefit_Tag.png"),
caption = "Fit to the tagging survey index of abundance",
label = 'tag-index-fit')
```


```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "index2_cpuefit_MPA.png"),
caption = "Fit to the MPA survey index of abundance",
label = 'mpa-index-fit')
```

<!-- ====================================================================== -->
<!-- ******************     Life history parameters    ***************************** --> 
<!-- ====================================================================== -->

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "bio1_sizeatage.png"), 
caption = "Model estimated length-at-age in the beginning of the year. Shaded area indicates 95 percent distribution of length-at-age around the estimated growth curve",
label = 'len-age-ss')
```

<!-- ====================================================================== -->
<!-- ******************     Recruitment    ***************************** --> 
<!-- ====================================================================== -->

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "ts11_Age-0_recruits_(1000s)_with_95_asymptotic_intervals.png"), 
caption = "Estimated time series of age-0 recruits (1000s)",
label = 'recruits')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "recdevs2_withbars.png"), 
caption = "Estimated time series of recruitment deviations",
label = 'rec-devs')
```


```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "recdevs3_varcheck.png"), 
caption = "Recruitment deviations variance by year. This plot tracks the information content contained in each recruitment deviation. Values below the red line (assumed recruitment variability) indicates years with more informed recruitment deviations",
label = 'rec-devs-sigmas')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "SR_curve.png"), 
caption = "Stock-recruit curve. Point colors indicate year, with warmer colors indicating earlier years and cooler colors in showing later years",
label = 'bh-curve')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "recruit_fit_bias_adjust.png"),
caption = "Recruitment bias adjustment applied in the reference model",
label = 'bias-adj')
```
```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "recdevs3_varcheck.png"),
caption = "Recruitment deviations variance check. Low standard deviations indicate years with informative deviations ",
label = 'varcheck')
```

<!-- ====================================================================== -->
<!-- ******************     Selectivity    ***************************** --> 
<!-- ====================================================================== -->

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "sel01_multiple_fleets_length1.png"),
caption = "Length-based selectivity curves for each fleet and survey",
label = 'fleet_selectivity')
```

<!-- ======================================================= -->  
<!-- ****************** Time Series ************************ --> 
<!-- ======================================================= -->


```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "ts7_Spawning_output_with_95_asymptotic_intervals_intervals.png"), 
caption = "Estimated time series of spawning output (in millions of eggs)",
label = 'ssb')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "ts1_Total_biomass_(mt).png"), 
caption = "Estimated time series of total biomass (mt)",
label = 'tot-bio')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "ts9_Relative_spawning_output_intervals.png"), 
caption = "Estimated time series of fraction of unfished spawning output",
label = 'depl')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(comp_ass_loc, "compare2_spawnbio_uncertainty.png"), 
caption = "Comparison of the time series of spawning output between the 2015 and 2023 assessment results",
label = 'comp_ssb')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(comp_ass_loc, "compare4_Bratio_uncertainty.png"), 
caption = "Comparison of the time series of relative spawning output between the 2015 and 2023 assessment results",
label = 'comp_depl')
```

<!-- ====================================================================== -->
<!-- ******************       Sensitivity     ***************************** --> 
<!-- ====================================================================== -->

```{r, echo=FALSE, results='asis'}
add_figure(
filein = file.path(sensi_data_fig_loc, "Sensi_logREplot_SB_Dep_F_MSY.png"),
caption = "Log relative change (log((Model_sensi-Model_ref)/Model_ref)) in data treatment for 5 derived quantities. Colored boxes indicate 95 percent confidence interval of the reference model",
label = 'sensi-data-RE')
```

```{r, echo=FALSE, results='asis'}
add_figure(
filein = file.path(sensi_data_fig_loc, "compare2_spawnbio_uncertainty.png"),
caption = "Spawning output (in millions of eggs) time series by data treatment compared to the reference model",
label = 'sensi-data-ssb')
```

```{r, echo=FALSE, results='asis'}
add_figure(
filein = file.path(sensi_data_fig_loc, "compare4_Bratio_uncertainty.png"),
caption = "Relative spawning output time series by data treatment compared to the reference model. Missing scenarios mean the spawning output was too large to show",
label = 'sensi-data-depl')
```

```{r, echo=FALSE, results='asis'}
add_figure(
filein = file.path(sensi_modspex_fig_loc, "Sensi_logREplot_SB_Dep_F_MSY.png"),
caption = "Log relative change (log((Model_sensi-Model_ref)/Model_ref)) in model specification scenario for 5 derived quantities. Colored boxes indicate 95 percent confidence interval of the reference model",
label = 'sensi-modspec-RE')
```

```{r, echo=FALSE, results='asis'}
add_figure(
filein = file.path(sensi_modspex_fig_loc, "compare2_spawnbio_uncertainty.png"),
caption = "Spawning output (in millions of eggs) time series by model specification scenario compared to the reference model. Missing scenarios mean the spawning output was too large to show",
label = 'sensi-modspec-ssb')
```

```{r, echo=FALSE, results='asis'}
add_figure(
filein = file.path(sensi_modspex_fig_loc, "compare4_Bratio_uncertainty.png"),
caption = "Relative spawning output time series by model specification scenario compared to the reference model",
label = 'sensi-modspec-depl')
```

<!-- ============================================================================== -->
<!-- ******************      Likelihood Profiles      ***************************** --> 
<!-- ============================================================================== -->

```{r, results = 'asis'}
add_figure(
filein = file.path(likeprof_fig_loc,"parameter_panel_LnQ_base_Acoustic_Visual(6).png"), 
caption = "Acoustic-visual survey catchability likelihood profile (change in the negative log-likelihood across a range of catchability values) and derived quantities.",
label = 'AVq-profile')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(likeprof_fig_loc, "piner_panel_LnQ_base_Acoustic_Visual(6).png"), 
caption = "Acoustic-visual survey catchability likelihood profile for each of the likelihood components",
label = 'AVq-profile-components')
```


```{r, results = 'asis'}
add_figure(
filein = file.path(likeprof_fig_loc,"parameter_panel_SR_BH_steep.png"), 
caption = "Beverton-Holt steepness parameter likelihood profile (change in the negative log-likelihood across a range of steepness values) and derived quantities.",
label = 'steepness-profile')
```


```{r, results = 'asis'}
add_figure(
filein = file.path(likeprof_fig_loc, "piner_panel_SR_BH_steep.png"), 
caption = "Beverton-Holt steepness parameter likelihood profile for each of the likelihood components",
label = 'steepness-profile-components')
```


```{r, results = 'asis'}
add_figure(
filein = file.path(likeprof_fig_loc, "M_fm_multilikelihood_profile.png"), 
caption = "Female and male $M$ multi-parameter likelihood profile and derived quantities. Red lines in the top left figure indicate significantly similar values compared to the reference model. Broken and solid lines in the bottom right figure indicate target and limit referene points, respectively",
label = 'M-multiprofile-combo')
```



<!-- ====================================================================== -->
<!-- ******************     Retrospectives    ***************************** --> 
<!-- ====================================================================== -->

```{r, results = 'asis'}
add_figure(
filein = file.path(retro_loc,  "compare2_spawnbio_uncertainty.png"), 
caption = "Change in the estimate of spawning output when the most recent 10 years of data area removed sequentially",
label = 'retro-ssb')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(retro_loc,  "compare4_Bratio_uncertainty.png"),
caption = "Change in the estimate of fraction unfished when the most recent 10 years of data area removed sequentially",
label = 'retro-depl')
```

\newpage


<!-- ====================================================================== -->
<!-- ******************    Reference Points    **************************** --> 
<!-- ====================================================================== -->


```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "SPR2_minusSPRseries.png"), 
caption = "Estimated 1 - relative spawning ratio (SPR) by year",
label = '1-spr')
```

\clearpage

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "SPR4_phase.png"), 
caption = "Phase plot of the relative biomass (also referred to as fraction unfished) versus the SPR ratio where each point represents the biomass ratio at the start of the year and the relative fishing intensity in that same year. Lines through the final point show the 95 percent intervals based on the asymptotic uncertainty for each dimension. The shaded ellipse is a 95 percent region which accounts for the estimated correlations between the biomass ratio and SPR ratio",
label = 'phase')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc, "plots", "yield2_yield_curve_with_refpoints.png"), 
caption = "Equilibrium yield curve for the reference model. Values are based on the 2020
fishery selectivities and with steepness fixed at 0.72",
label = 'yield')
```

